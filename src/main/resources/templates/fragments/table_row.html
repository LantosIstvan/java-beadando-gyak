!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<!-- EZ A SOR A L√âNYEG! -->
<!-- A th:fragment="row(aru)" teszi lehet≈ëv√©, hogy a diagram.html megh√≠vja 'row' n√©ven -->
<tr th:fragment="row(aru)">

    <!-- 1. K√©p -->
    <td>
        <div style="width: 50px; height: 50px;" class="rounded overflow-hidden bg-light">
            <!-- A Controllerben l√©v≈ë map-b≈ël olvassuk ki a k√©pet -->
            <!-- Ha categoryImages null lenne, kezelj√ºk a hib√°t -->
            <img th:src="${categoryImages != null && categoryImages.get(aru.kategoria?.katNev) != null ? categoryImages.get(aru.kategoria.katNev) : '/img/default.png'}"
                 alt="Term√©k k√©p"
                 class="w-100 h-100"
                 style="object-fit: cover;">
        </div>
    </td>

    <!-- 2. N√©v -->
    <td th:text="${aru.nev}" class="fw-bold">Term√©k neve</td>

    <!-- 3. Kateg√≥ria -->
    <td>
        <span class="badge bg-secondary" th:text="${aru.kategoria?.katNev}">Kateg√≥ria</span>
    </td>

    <!-- 4. √År -->
    <td class="text-end" th:text="${aru.ar} + ' Ft'">0 Ft</td>

    <!-- 5. Mennyis√©g -->
    <td class="text-end">
        <!-- Null check az elad√°sra -->
        <span th:text="${aru.eladas != null ? aru.eladas.mennyiseg : 0}">0</span>
        <small class="text-muted" th:text="${aru.egyseg}">db</small>
    </td>

    <!-- 6. DINAMIKUS OSZLOP (A Turpiss√°g) -->

    <!-- Ha diagram oldal: BEV√âTEL -->
    <td class="text-end fw-bold text-success"
        th:if="${activePage == '/diagram'}"
        th:text="${aru.bevetel} + ' Ft'">
        0 Ft
    </td>

    <!-- Ha adatb√°zis oldal: GOMBOK -->
    <td class="text-end" th:if="${activePage == '/adatbazis'}">
        <div class="btn-group btn-group-sm">
            <a th:href="@{'/adatbazis/edit/' + ${aru.aruKod}}" class="btn btn-outline-primary">
                ‚úèÔ∏è <!-- Ha nincs Bootstrap Icon, legal√°bb emoji legyen -->
            </a>
            <form th:action="@{'/adatbazis/delete/' + ${aru.aruKod}}" method="post" class="d-inline">
                <button type="submit" class="btn btn-outline-danger" onclick="return confirm('Biztosan t√∂rli?')">
                    üóëÔ∏è
                </button>
            </form>
        </div>
    </td>

</tr>

</body>
</html>